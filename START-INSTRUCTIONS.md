# 应用启动说明（修订版）

## ✅ 问题已修复

### 修复内容
1. ✅ 添加了 `wait-on` 依赖，等待 Vite 就绪后再启动 Electron
2. ✅ 修改了 `dev` 脚本，现在会自动启动三个进程：
   - 主进程编译（watch）
   - Vite 开发服务器
   - **Electron 窗口（新增）**

## 🚀 现在如何启动

### 命令
```bash
npm run dev
```

### 会发生什么
1. 📝 TypeScript 开始编译主进程
2. 🌐 Vite 启动开发服务器（http://localhost:5173）
3. ⏳ 等待 Vite 完全就绪
4. 🪟 **Electron 窗口自动打开** ← 这就是应用！
5. 📺 您会看到一个桌面窗口，这是您要使用的应用界面

## 🪟 Electron 窗口是什么样的？

运行后会看到一个这样的窗口：

```
┌─────────────────────────────────────────┐
│  FFmpeg 视频压缩应用                    │
├─────────────────────────────────────────┤
│                                         │
│  [压缩]  [工具]  [设置]  ← 导航栏      │
│                                         │
│  ┌─────────────────────────────────┐  │
│  │  拖拽视频文件到这里             │  │
│  │                                 │  │
│  │    或点击选择文件               │  │
│  └─────────────────────────────────┘  │
│                                         │
│  预设方案: [推荐]  [流畅]  [平衡]      │
│                                         │
│  编码器: [Auto]                        │
│  硬件加速: [启用]                      │
│                                         │
│  [开始转码]                            │
│                                         │
└─────────────────────────────────────────┘
```

## 📋 使用指南

### 第一步：启动
```bash
npm run dev
```

### 第二步：等待
1. 等待编译完成（通常在几秒内）
2. **等待 Electron 窗口自动打开**
3. 不要关闭终端窗口（保持运行）

### 第三步：使用
在打开的 Electron 窗口中：
- 切换到"压缩"页面，拖拽视频文件
- 切换到"工具"页面，使用裁剪/GIF/音频提取
- 切换到"设置"页面，配置应用

### 第四步：停止
1. 关闭 Electron 窗口
2. 在终端按 `Ctrl + C`

## ⚠️ 常见问题

### Q: 还是没有看到窗口？
**检查**:
1. 终端是否有错误信息？
2. 等待了多久？（首次启动可能需要 10-30 秒）
3. 窗口是否在其他桌面/显示器？

**解决**:
```bash
# 查看进程状态
ps aux | grep electron

# 重新启动
npm run dev
```

### Q: 看到端口被占用？
**已修复**：现在会自动切换端口，不再报错。

### Q: 能在浏览器中打开吗？
**不能**。这是桌面应用，必须在 Electron 窗口中运行。

## 🎯 预期行为

### 正确的启动流程
```
$ npm run dev

[0] tsc -p tsconfig.main.json --watch
[0] 8:53:18 PM - Starting compilation...
[0] 8:53:18 PM - Found 0 errors. Watching for file changes.

[1] VITE v5.4.21  ready in 106 ms
[1] ➜  Local:   http://localhost:5173/

[2] wait-on http://localhost:5173
[2] ... done
[2] 启动 Electron...
[2] 🪟 Electron 窗口已打开！
```

### 您应该看到
1. ✅ 终端输出编译和启动信息
2. ✅ **一个桌面窗口自动打开** ← 这是应用！
3. ✅ 窗口中可以看到"压缩"、"工具"、"设置"三个页面

## ✅ 现在请重新运行

```bash
# 1. 确认在项目目录
cd /Users/herbal/ffmpeg-app

# 2. 运行命令
npm run dev

# 3. 等待窗口自动打开
```

**现在应该会自动打开 Electron 窗口了！** 🎉

---

**提示**: 如果窗口还是没有打开，请告诉我终端显示的具体错误信息。

