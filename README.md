# FFmpeg è§†é¢‘å·¥å…·

ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è·¨å¹³å°æ¡Œé¢è§†é¢‘å¤„ç†åº”ç”¨ï¼ŒåŸºäº Electron + React + TypeScript + FFmpeg æ„å»ºã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Platform](https://img.shields.io/badge/platform-macOS%20%7C%20Windows%20%7C%20Linux-lightgrey.svg)
![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-green.svg)

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ¬ è§†é¢‘å‹ç¼©
- **å¤šç¼–ç å™¨æ”¯æŒ**ï¼šH.264ã€H.265ã€VP9ã€AV1
- **ç¡¬ä»¶åŠ é€Ÿ**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ©ç”¨ GPU ç¡¬ä»¶åŠ é€Ÿï¼ˆVideoToolboxã€NVENCã€QSVã€AMFï¼‰
- **æ™ºèƒ½é¢„è®¾**ï¼šæä¾›å¹³è¡¡ã€é«˜è´¨é‡ã€å¿«é€Ÿç­‰å¤šç§é¢„è®¾
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒå¤šæ–‡ä»¶é˜Ÿåˆ—æ‰¹é‡å‹ç¼©
- **è‡ªå®šä¹‰è¾“å‡º**ï¼šè‡ªå®šä¹‰æ–‡ä»¶åã€è¾“å‡ºç›®å½•ã€å®¹å™¨æ ¼å¼
- **éŸ³é¢‘å¤„ç†**ï¼šéŸ³é¢‘ç›´æ¥å¤åˆ¶æˆ–é‡æ–°ç¼–ç 
- **å­—å¹•æ”¯æŒ**ï¼šè½¯å­—å¹•åµŒå…¥æˆ–ç¡¬å­—å¹•çƒ§å½•

### âœ‚ï¸ è§†é¢‘å‰ªè¾‘
- **ç²¾ç¡®å‰ªè¾‘**ï¼šæ”¯æŒæ¯«ç§’çº§æ—¶é—´ç²¾åº¦
- **å®æ—¶é¢„è§ˆ**ï¼šå‰ªè¾‘å‰å¯é¢„è§ˆæ•ˆæœï¼ˆå«éŸ³é¢‘ï¼‰
- **åŒæ¨¡å¼**ï¼š
  - **æ— æŸå¿«å‰ª**ï¼šä¸é‡æ–°ç¼–ç ï¼Œé€Ÿåº¦æå¿«
  - **ç²¾å‡†å‰ªè¾‘**ï¼šé‡æ–°ç¼–ç ï¼Œç²¾ç¡®åˆ°å¸§
- **æ™ºèƒ½å›é€€**ï¼šæ— æŸå‰ªè¾‘å¤±è´¥è‡ªåŠ¨åˆ‡æ¢ç²¾å‡†æ¨¡å¼

### ğŸï¸ GIF åˆ¶ä½œ
- **è§†é¢‘è½¬ GIF**ï¼šä»è§†é¢‘ç‰‡æ®µç”ŸæˆåŠ¨å›¾
- **å‚æ•°è°ƒèŠ‚**ï¼šå¯è°ƒèŠ‚å¸§ç‡ã€å°ºå¯¸ã€æŠ–åŠ¨ç®—æ³•
- **é«˜è´¨é‡**ï¼šä½¿ç”¨è°ƒè‰²æ¿ä¼˜åŒ–ï¼Œè‰²å½©è¿˜åŸåº¦é«˜

### ğŸµ éŸ³é¢‘æå–
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šM4Aã€MP3ã€AACã€FLACã€Opus
- **éŸ³é¢‘ç›´æ¥å¤åˆ¶**ï¼šæ— æŸæå–åŸå§‹éŸ³é¢‘
- **é‡æ–°ç¼–ç **ï¼šå¯é€‰æ‹©ç¼–ç å™¨å’Œç ç‡

### âš™ï¸ è®¾ç½®ç®¡ç†
- **é»˜è®¤è¾“å‡ºç›®å½•**ï¼šé…ç½®å…¨å±€é»˜è®¤è¾“å‡ºè·¯å¾„
- **ä¸»é¢˜åˆ‡æ¢**ï¼šæµ…è‰²/æ·±è‰²/è·Ÿéšç³»ç»Ÿ
- **è¯­è¨€æ”¯æŒ**ï¼šä¸­æ–‡/è‹±æ–‡
- **FFmpeg ç®¡ç†**ï¼šè‡ªå®šä¹‰ FFmpeg è·¯å¾„
- **ç¡¬ä»¶åŠ é€Ÿ**ï¼šå¼€å¯/å…³é—­ç¡¬ä»¶åŠ é€Ÿ

## ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚

- **Node.js**ï¼š>= 18.0.0
- **FFmpeg**ï¼šéœ€è¦ç³»ç»Ÿå·²å®‰è£… FFmpeg å’Œ FFprobe
- **æ“ä½œç³»ç»Ÿ**ï¼š
  - macOS 10.13+
  - Windows 10+
  - Linuxï¼ˆä¸»æµå‘è¡Œç‰ˆï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… FFmpeg

#### macOS
```bash
# ä½¿ç”¨ Homebrew
brew install ffmpeg
```

#### Windows
```bash
# ä½¿ç”¨ Chocolatey
choco install ffmpeg

# æˆ–è€…ä½¿ç”¨ Scoop
scoop install ffmpeg

# æˆ–æ‰‹åŠ¨ä¸‹è½½
# è®¿é—® https://www.gyan.dev/ffmpeg/builds/
# ä¸‹è½½ ffmpeg-release-essentials.zip
# è§£å‹å¹¶æ·»åŠ åˆ°ç³»ç»Ÿ PATH
```

#### Linux
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install ffmpeg

# Fedora
sudo dnf install ffmpeg

# Arch Linux
sudo pacman -S ffmpeg
```

### 2. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd ffmpeg-app
```

### 3. å®‰è£…ä¾èµ–
```bash
npm install
```

### 4. å¯åŠ¨å¼€å‘æ¨¡å¼

#### macOS / Linux
```bash
npm run dev
```

#### Windows
```bash
npm run dev
```

åº”ç”¨å°†åœ¨å‡ ç§’é’Ÿåè‡ªåŠ¨å¯åŠ¨ã€‚å¦‚æœæ²¡æœ‰è‡ªåŠ¨å¯åŠ¨ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»ï¼ŒElectron éœ€è¦æ—¶é—´ç¼–è¯‘å’Œå¯åŠ¨ã€‚

### 5. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

#### æ„å»ºå½“å‰å¹³å°
```bash
npm run build
```

#### æ„å»º macOS åº”ç”¨
```bash
npm run build:mac
```

#### æ„å»º Windows åº”ç”¨
```bash
npm run build:win
```

#### æ„å»º Linux åº”ç”¨
```bash
npm run build:linux
```

#### æ„å»ºæ‰€æœ‰å¹³å°
```bash
npm run build:all
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ffmpeg-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main/                    # Electron ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ main.ts             # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ preload.ts          # é¢„åŠ è½½è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ ipc.ts              # IPC é€šä¿¡ï¼ˆå‹ç¼©ï¼‰
â”‚   â”‚   â”œâ”€â”€ ipc.tools.ts        # IPC é€šä¿¡ï¼ˆå·¥å…·ï¼‰
â”‚   â”‚   â”œâ”€â”€ ipc.settings.ts     # IPC é€šä¿¡ï¼ˆè®¾ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ ffmpegManager.ts    # FFmpeg ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ gpuDetect.ts        # GPU æ£€æµ‹
â”‚   â”‚   â””â”€â”€ previewService.ts   # é¢„è§ˆæœåŠ¡
â”‚   â”œâ”€â”€ renderer/                # React æ¸²æŸ“è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ CompressPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolsPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SettingsPage.tsx
â”‚   â”‚   â”œâ”€â”€ components/         # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/              # Zustand çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ i18n/               # å›½é™…åŒ–
â”‚   â”‚   â””â”€â”€ App.tsx             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ services/                # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ ffmpeg/             # FFmpeg æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ queue/              # é˜Ÿåˆ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ config.ts           # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ logger.ts           # æ—¥å¿—æœåŠ¡
â”‚   â”œâ”€â”€ shared/                  # å…±äº«å·¥å…·
â”‚   â””â”€â”€ types/                   # ç±»å‹å®šä¹‰
â”œâ”€â”€ tests/                       # å•å…ƒæµ‹è¯•
â”œâ”€â”€ dist/                        # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Electron 30
- **UI**: React 18 + TypeScript
- **æ ·å¼**: Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ„å»ºå·¥å…·**: Vite
- **æµ‹è¯•**: Vitest
- **æ—¥å¿—**: Pino
- **è§†é¢‘å¤„ç†**: FFmpeg
- **æŒä¹…åŒ–**: electron-store

## ğŸ“Š å½“å‰è¿›å±•

### âœ… å·²å®ŒæˆåŠŸèƒ½

1. **è§†é¢‘å‹ç¼©æ¨¡å—**
   - âœ… å¤šç¼–ç å™¨æ”¯æŒ
   - âœ… ç¡¬ä»¶åŠ é€Ÿæ£€æµ‹ä¸ä½¿ç”¨
   - âœ… æ‰¹é‡é˜Ÿåˆ—å¤„ç†
   - âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º
   - âœ… é”™è¯¯å¤„ç†ä¸é‡è¯•
   - âœ… è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶å

2. **è§†é¢‘å‰ªè¾‘å·¥å…·**
   - âœ… æ—¶é—´èŒƒå›´é€‰æ‹©ï¼ˆæ‹–æ‹½ + è¾“å…¥ï¼‰
   - âœ… æ— æŸ/ç²¾å‡†åŒæ¨¡å¼
   - âœ… å®æ—¶é¢„è§ˆï¼ˆå«éŸ³é¢‘ï¼‰
   - âœ… æ™ºèƒ½å›é€€æœºåˆ¶
   - âœ… åŒè§†é¢‘å¯¹æ¯”é¢„è§ˆ

3. **GIF åˆ¶ä½œå·¥å…·**
   - âœ… è§†é¢‘è½¬ GIF
   - âœ… å‚æ•°è°ƒèŠ‚
   - âœ… é¢„è§ˆåŠŸèƒ½

4. **éŸ³é¢‘æå–å·¥å…·**
   - âœ… å¤šæ ¼å¼æ”¯æŒ
   - âœ… æ— æŸ/ç¼–ç æ¨¡å¼
   - âœ… ç ç‡è°ƒèŠ‚

5. **è®¾ç½®ç®¡ç†**
   - âœ… é»˜è®¤è¾“å‡ºç›®å½•
   - âœ… ä¸»é¢˜åˆ‡æ¢
   - âœ… è¯­è¨€åˆ‡æ¢
   - âœ… FFmpeg è·¯å¾„ç®¡ç†
   - âœ… ç¡¬ä»¶åŠ é€Ÿå¼€å…³

6. **ç”¨æˆ·ä½“éªŒ**
   - âœ… é¡µé¢é—´å¯¼èˆª
   - âœ… Toast é€šçŸ¥ç³»ç»Ÿ
   - âœ… æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 
   - âœ… ä¸Šä¼ è¿›åº¦æ˜¾ç¤º
   - âœ… æ¸…ç©ºé˜Ÿåˆ—
   - âœ… æœ¬åœ°å­˜å‚¨è®°å¿†
   - âœ… ä¸€é”®è®¾ä¸ºé»˜è®¤

### ğŸš§ å¾…ä¼˜åŒ–

- [ ] æ‰“åŒ…ä¼˜åŒ–ï¼ˆå‡å°ä½“ç§¯ï¼‰
- [ ] é”™è¯¯æ—¥å¿—å¯¼å‡º
- [ ] æ›´å¤šè¯­è¨€æ”¯æŒ
- [ ] æ‰¹é‡é¢„è®¾æ¨¡æ¿
- [ ] è§†é¢‘åˆå¹¶åŠŸèƒ½
- [ ] æ›´å¤šæ»¤é•œæ•ˆæœ

## ğŸ› è°ƒè¯•

### å¼€å¯å¼€å‘è€…å·¥å…·

å¼€å‘æ¨¡å¼ä¸‹ä¼šè‡ªåŠ¨æ‰“å¼€ Chrome DevToolsã€‚å¦‚éœ€æ‰‹åŠ¨æ‰“å¼€ï¼š

- **macOS**: `Cmd + Option + I`
- **Windows/Linux**: `Ctrl + Shift + I`

### æŸ¥çœ‹æ—¥å¿—

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- **macOS**: `~/Library/Logs/ffmpeg-video-compressor/`
- **Windows**: `%USERPROFILE%\AppData\Roaming\ffmpeg-video-compressor\logs\`
- **Linux**: `~/.config/ffmpeg-video-compressor/logs/`

### å¸¸è§é—®é¢˜

**Q: FFmpeg æœªæ‰¾åˆ°ï¼Ÿ**

A: ç¡®ä¿ FFmpeg å·²æ­£ç¡®å®‰è£…å¹¶æ·»åŠ åˆ°ç³»ç»Ÿ PATHã€‚å¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œ `ffmpeg -version` éªŒè¯ã€‚

**Q: ç¡¬ä»¶åŠ é€Ÿä¸å·¥ä½œï¼Ÿ**

A: æ£€æŸ¥ GPU é©±åŠ¨æ˜¯å¦å®‰è£…ï¼Œå¯ä»¥åœ¨è®¾ç½®é¡µæŸ¥çœ‹ç¡¬ä»¶åŠ é€ŸçŠ¶æ€ã€‚éƒ¨åˆ†è€æ—§ GPU å¯èƒ½ä¸æ”¯æŒã€‚

**Q: åº”ç”¨å¯åŠ¨åçª—å£ç©ºç™½ï¼Ÿ**

A: ç­‰å¾…å‡ ç§’é’Ÿï¼ŒVite éœ€è¦æ—¶é—´ç¼–è¯‘ã€‚å¦‚æœé•¿æ—¶é—´ç©ºç™½ï¼Œæ£€æŸ¥ç»ˆç«¯æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ã€‚

**Q: Windows ä¸‹æ— æ³•æ„å»ºï¼Ÿ**

A: ç¡®ä¿å®‰è£…äº† Windows Build Toolsï¼š
```bash
npm install --global windows-build-tools
```

## ğŸ“ å¼€å‘è¯´æ˜

### è¿è¡Œæµ‹è¯•
```bash
npm test                # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch      # ç›‘å¬æ¨¡å¼
npm run test:coverage   # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

### ä»£ç æ£€æŸ¥
```bash
npm run lint           # ESLint æ£€æŸ¥
npm run typecheck      # TypeScript ç±»å‹æ£€æŸ¥
```

### æ¸…ç†æ„å»º
```bash
npm run clean          # æ¸…ç† dist ç›®å½•
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [FFmpeg](https://ffmpeg.org/) - å¼ºå¤§çš„å¤šåª’ä½“å¤„ç†æ¡†æ¶
- [Electron](https://www.electronjs.org/) - è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- [React](https://react.dev/) - UI æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶

---

**æç¤º**ï¼šå¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ â­ Starï¼

