# Electron 应用访问指南

## 🔍 理解 Electron 应用

### 什么是 Electron？

**Electron** 是一个使用 Web 技术（HTML、CSS、JavaScript）构建跨平台桌面应用的框架。

### 与传统网页的区别

#### 传统网页 🖥️
- 在浏览器中运行
- 通过 `http://localhost:5173` 访问
- 只能使用浏览器 API

#### Electron 应用 🖥️✨
- **独立桌面应用**（有窗口的应用）
- **不是浏览器访问**的网页
- 可以访问系统 API（文件系统、系统通知等）

### 如何访问 Electron 应用？

#### ❌ 错误方式
```bash
# 这不是正确的访问方式
浏览器打开 http://localhost:5173
```

#### ✅ 正确方式

**运行命令后，应用会自动打开一个桌面窗口！**

```bash
npm run dev
```

**会发生什么**：
1. Vite 开发服务器启动（在后台）
2. Electron 窗口**自动打开**（一个独立的桌面窗口）
3. 这个窗口就是您的应用界面

## 🎯 当前项目运行方式

### 运行命令
```bash
npm run dev
```

### 运行后会看到什么

#### 1. 终端输出
```
[0] 8:46:09 PM - Found 0 errors. Watching for file changes.
[1] VITE v5.4.21  ready in 112 ms
[1] ➜  Local:   http://localhost:5173/
```

**注意**：`http://localhost:5173` 只是 Vite 开发服务器的地址，用于编译前端代码。

#### 2. 桌面窗口（Electron 窗口）
**会自动打开一个应用窗口**，类似于：
```
┌─────────────────────────────────────┐
│  FFmpeg 视频压缩应用                │
├─────────────────────────────────────┤
│                                     │
│  [压缩]  [工具]  [设置]            │
│                                     │
│  ┌───────────────────────────┐    │
│  │  拖拽文件到此处           │    │
│  │                           │    │
│  └───────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

**这就是您的 Electron 应用！**

## 🔧 修复端口问题

### 问题
当端口 5173 被占用时，Vite 会报错。

### 解决方案

**方案 1：自动切换端口（已实现）**
```bash
# vite.config.ts 已设置为 strictPort: false
# 会自动使用下一个可用端口（5174, 5175...）
```

**方案 2：手动指定端口**
```bash
npm run dev -- --port 8080
```

### 验证修复
修复后，即使端口被占用，Vite 会自动使用其他端口，如：
```
VITE v5.4.21  ready in 112 ms
➜  Local:   http://localhost:5174/  ← 自动切换了
```

## 📋 使用指南

### 1. 启动应用
```bash
npm run dev
```

### 2. 看到 Electron 窗口
- ✅ 会自动打开一个桌面窗口
- ✅ 这是您要使用的应用界面
- ✅ **不需要**在浏览器中打开

### 3. 使用应用
在打开的 Electron 窗口中：
- **压缩页面**：拖拽视频文件，配置参数，开始转码
- **工具页面**：使用裁剪、GIF、音频提取工具
- **设置页面**：配置路径、语言、主题等

### 4. 停止应用
- 关闭 Electron 窗口
- 或在终端按 `Ctrl + C`

## 🎨 应用界面说明

### 导航栏
```
[压缩]  [工具]  [设置]
```
- 点击切换不同功能页面

### P1 - 压缩页面
- 文件拖拽上传
- 预设和编码器配置
- 任务队列和进度

### P2 - 工具页面
- 视频裁剪
- GIF 创建
- 音频提取
- 双视频预览

### P3 - 设置页面
- 默认输出路径
- 语言/主题设置
- GPU 体检
- FFmpeg 管理

## ⚠️ 常见问题

### Q: 看不到 Electron 窗口？
**A**: 检查终端输出，可能需要安装依赖：
```bash
npm install
npm run dev
```

### Q: 端口被占用？
**A**: 已修复，会自动切换端口。

### Q: 可以在浏览器中打开吗？
**A**: 不可以。这是一个桌面应用，不是网页。必须在 Electron 窗口中运行。

### Q: 如何打包成独立应用？
**A**: 
```bash
npm run build:mac   # macOS
npm run build:win   # Windows  
npm run build:linux # Linux
```

## ✅ 总结

### 正确的使用方式
1. 运行 `npm run dev`
2. **等待 Electron 窗口自动打开**
3. 在窗口中操作应用
4. 不是访问 `http://localhost:5173`

### 记住
- ✅ Electron 窗口 = 您的应用
- ❌ 浏览器访问 = 不正确的方式
- ✅ `npm run dev` = 启动完整应用

---

**现在您可以重新运行 `npm run dev`，窗口会自动打开！** 🎉

